---
title: 案例上手 Python 数据可视化-3
---
<article id="topicContainer" class="column_content"><h2 class="topic_title"></h2><div><p>走在大街上，满眼都是广告——说明市场经济发达，这是好事情。再观察一下广告，多是以各种样式的图形呈现，而不是简简单单地把数字呈现出来——即使是数字，也想办法把数字搞得像图一样。这样做的目的是要吸引人的注意，并且能够让人一眼就能看到想要看的。</p>
<p>别以为这是广告商的策略，其实，他们只是顺应了大脑的特点（具体请参考有关心理学和脑科学的研究成果）。</p>
<p>因为大脑的这种喜好，所以才非常有必要“数据可视化”，即用某种适合的图形来表示某些数据。</p>
<h3 id="">数据可视化的类别</h3>
<p>通常有两种可视化数据的方式——这是我提出的分类，如有雷同，纯属巧合：</p>
<ul>
<li>艺术性可视化</li>
<li>数学性可视化</li>
</ul>
<p>以 2018 年的中美“贸易战”为例，美国的媒体为了向美国老百姓说明中国经济发展的情况，特别是对美国经济的威胁，一定要使用到中国经济和美国经济相关数字，那么这些数字怎么展示？</p>
<p><img src="https://images.gitbook.cn/de12efa0-331a-11e9-bff5-05638cbe7e78" width = "80%" /></p>
<p>图 1 中美 GDP 比较（<a href="http://www.asiawind.com/bb/viewtopic.php?f=3&t=5923">图片来源</a>）</p>
<p>这是一张预测中美 GPD 走势的图示，看此图，我想，美国人也没有什么太被刺激的感觉，因为看看两条线，未来即使有高低之别，但差别也没有那么吓人，况且，预测还可能不准确呢。</p>
<p>这就是数学性可视化，虽然比较理智的反映了数据。但是，给人的印象不是很深刻，或者没有让人感到受刺激。</p>
<p>再对比图 2。</p>
<p><img src="https://images.gitbook.cn/32a92430-331b-11e9-ae61-ab46ecd2ee1c" width = "80%" /></p>
<p>图 2 艺术性地表示 GDP（<a href="https://www.flickr.com/photos/26087974@N05/9619387914">图片来源</a>）</p>
<p>虽然这张图中也包含了数字，但是，它同时配置了表示数字的图示，并且都很形象，人的视觉无形中就被图示所吸引了。把数字本来的抽象意义，用直观的方式表达出来，更刺激人的大脑。</p>
<p>这就是将原本的数据通过“艺术性可视化”的方式进行了表达。目的无非是要从视觉的维度让人感受到一种震撼。</p>
<p>“艺术性可视化”，它通常不会科学、准确地反映数据的含义，而是为了某个目的追求感官刺激，比如图 3。</p>
<p><img src="https://images.gitbook.cn/75efbc90-331b-11e9-ae61-ab46ecd2ee1c" width = "80%" /></p>
<p>图 3  预测 GDP 变化    （<a href="http://www.horndiplomat.com/2018/08/24/the-rapid-economic-growth-of-china/">图片来源</a>）</p>
<p>在本达人课中所要介绍的“数据可视化”，肯定不是那种蛊惑人心的可视化，而是本着科学精神的“数学性可视化”，虽然它可能不如“艺术性的可视化”好看，但是，更趋真实地反映了对象的本质。</p>
<h3 id="-1">常见图像和用途</h3>
<p>“数学性可视化”，就是要将数据用图像的方式表达。从数学角度来看，不同的图像有不同的用途或目的，下面依次简要说明（此处姑且讨论二维图像）。</p>
<h4 id="-2">散点图</h4>
<p>还记得高中物理课学过的折射定律吗？也称为斯涅尔定律，假设不知道，我们就探索一下。用实验的方式分别测量光线入射某透明介质的入射角和折射角大小，测量多次，于是就得到了入射角和折射角的数据集，分别用 alpha 和 belta 表示。</p>
<p>有了这两组数据，怎么研究入射角和折射角之间的关系呢？它们之间符合什么函数关系？</p>
<p>一种常用的方法是：</p>
<ul>
<li>建立一个坐标系，横坐标表示入射角，纵坐标表示折射角；</li>
<li>将入射角及其对应的折射角，作为坐标系中的一个坐标点，在此坐标系中把点标记出来。</li>
</ul>
<p>这样就在坐标系中“散落”了很多点，如图 4 所示：</p>
<p><img src="https://images.gitbook.cn/e7fdbc10-331b-11e9-bff5-05638cbe7e78" width = "80%" /></p>
<p>图 4  入射角和折射角散点图</p>
<p>接下来的任务就是观察这些点在坐标系中的分布，猜测它们应该符合什么函数关系，比如可能符合某个一次函数关系等（看起来像符合正比例函数的关系，人类曾经很长时间都这么认为，直到伟大的物理学家斯涅耳揭示了其中的奥秘为止）。</p>
<p>通过这个例子，可以总结如下：</p>
<ul>
<li>绘制散点图，要有对应的两组数据（二维图）；</li>
<li>两组数据所对应的两个变量是连续变量；</li>
<li>散点图的用途在于发现变量之间的关系。</li>
</ul>
<p>在实际业务中，散点图的样式可能具有多种，而且也不一定都是用来寻找某种函数关系。比如在地图上用色彩深浅画出各个城市的 PM2.5 指数，这也是一种散点图，通过这种散点图就能够看到污染城市的地理分布规律。</p>
<h4 id="-3">柱形图</h4>
<p>柱形图（也称为：柱状图），适用于二维数据集，但是有一个维度的数据需要具有比较意义。比如下面的数据：</p>
<table>
<thead>
<tr>
<th>省份</th>
<th>GDP（10 亿元）</th>
</tr>
</thead>
<tbody>
<tr>
<td>广东省</td>
<td>8,987.92</td>
</tr>
<tr>
<td>江苏省</td>
<td>8,590.09</td>
</tr>
<tr>
<td>山东省</td>
<td>7,267.82</td>
</tr>
<tr>
<td>浙江省</td>
<td>5,176.80</td>
</tr>
<tr>
<td>河南省</td>
<td>4,498.82</td>
</tr>
<tr>
<td>四川省</td>
<td>3,698.02</td>
</tr>
<tr>
<td>湖北省</td>
<td>3,652.30</td>
</tr>
<tr>
<td>河北省</td>
<td>3,596.40</td>
</tr>
<tr>
<td>湖南省</td>
<td>3,459.06</td>
</tr>
<tr>
<td>福建省</td>
<td>3,229.83</td>
</tr>
<tr>
<td>上海市</td>
<td>3,013.39</td>
</tr>
<tr>
<td>北京市</td>
<td>2,800.04</td>
</tr>
</tbody>
</table>
<p>对于这份数据，就比较适合用柱形图进行可视化。</p>
<p><img src="https://images.gitbook.cn/58b0f110-331d-11e9-ae61-ab46ecd2ee1c" width = "80%" /></p>
<p>图 5 部分省 GDP 柱形图</p>
<p>图中所示的柱子高度，表示数据表中各省的 GDP 值。</p>
<p>通过柱形图，非常明显地反映了各省 GDP 数据的差异。</p>
<p>但是注意，柱形图不适合大数据，在横坐标上如果排满了柱子，看着多眼晕呀。</p>
<h4 id="-4">条形图</h4>
<p>条形图，貌似就是柱状图横过来，对于数值都是大于 0 的数据而言，画出来的条形图可以这样理解。但是，下面这种类型的数据也是比较常见的。</p>
<table>
<thead>
<tr>
<th>城市</th>
<th>1 月份最低气温（℃）</th>
</tr>
</thead>
<tbody>
<tr>
<td>哈尔滨</td>
<td>﹣31</td>
</tr>
<tr>
<td>北京</td>
<td>﹣2.9</td>
</tr>
<tr>
<td>郑州</td>
<td>﹣4</td>
</tr>
<tr>
<td>济南</td>
<td>﹣5</td>
</tr>
<tr>
<td>南昌</td>
<td>3</td>
</tr>
<tr>
<td>长沙</td>
<td>2</td>
</tr>
<tr>
<td>广州</td>
<td>10</td>
</tr>
<tr>
<td>台北</td>
<td>14</td>
</tr>
</tbody>
</table>
<p>从数据表中可以看出，我国部分城市 1 月份最低气温，有的在 0℃ 以上，有的在 0℃ 以下。对于这类数据，用条形图显示，结果是这样的。</p>
<p><img src="https://images.gitbook.cn/bbe22920-331d-11e9-b3a9-4f8760d3237f" width = "80%" /></p>
<p>图 6 部分城市最低温</p>
<p>当然，这份数据也可以用前面的“柱形图”实现可视化。</p>
<h4 id="-5">折线图</h4>
<p>下面这份数据，是 1961 ~ 2017 年我国的 GDP 年度增长率。显然，如果用条形图、柱形图来实现可视化，效果都不是太好，因为数据量有点大了。</p>
<table>
<thead>
<tr>
<th>年份</th>
<th>中国 GDP 年度增长率</th>
</tr>
</thead>
<tbody>
<tr>
<td>2017 年</td>
<td>6.90%</td>
</tr>
<tr>
<td>2016 年</td>
<td>6.70%</td>
</tr>
<tr>
<td>2015 年</td>
<td>6.90%</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>1962 年</td>
<td>﹣5.58%</td>
</tr>
<tr>
<td>1961 年</td>
<td>﹣27.27%</td>
</tr>
</tbody>
</table>
<blockquote>
  <p>注：因为数据量比较多，所以显示部分。</p>
</blockquote>
<p>对这份数据实现可视化，比较好的选择是绘制折线图。</p>
<p><img src="https://images.gitbook.cn/ff641cd0-331d-11e9-b59c-dfe60266e7ff" width = "80%" /></p>
<p>图 7 我国理念 GDP 增长</p>
<p>从图示结果中，可以看出 GDP 的发展变化趋势。</p>
<p>折线图最典型的应用应该算是在股票方面了，范围大一点可以说是“金融数据分析”方面。</p>
<h4 id="-6">直方图</h4>
<p>直方图貌似“柱形图”，但两者有很大区别。</p>
<p>直方图是以各个矩形的面积描述各组的频数，所有矩形的面积之积为各组频数的和。</p>
<p>例如，使用下面的程序构造了一批随机数。</p>
<pre><code>import numpy as np
mu, sigma = 100, 15
x = mu + sigma * np.random.randn(1000)
</code></pre>
<p>想直观地了解这个数据集中数字分布的特征，就可以利用直方图。</p>
<p><img src="https://images.gitbook.cn/4a06b5e0-331e-11e9-ae61-ab46ecd2ee1c" width = "80%" /></p>
<p>图 8  正态分布</p>
<p>从图中可以看出，虽然是随机生成的，但是数据的分布还是有规律的，这就是统计学中的正态分布。</p>
<h4 id="-7">饼图</h4>
<p>饼图常用于表达某些量所占比例的情况。例如：</p>
<p><img src="https://images.gitbook.cn/6d384330-331e-11e9-ae61-ab46ecd2ee1c" width = "80%" /></p>
<p>图 9 饼图</p>
<p>图中显示了不同量占据总量的百分比，通过饼状图就能够对比分类数据的数值大小。当然，如果类别太多，会把“饼”分成太多的小份，不美观，也不易于观察。</p>
<h4 id="-8">箱形图</h4>
<p>箱形图又称盒须图、盒式图或箱线图。</p>
<p>图 10 显示了通常的箱形图的形状：</p>
<p><img src="https://images.gitbook.cn/ccf67490-331e-11e9-bff5-05638cbe7e78" width = "80%" /></p>
<p>图 10 箱线图</p>
<p>通过箱形图，可以观察到如下信息：</p>
<ul>
<li>数据的统计值为中位数、最大值、最小值等</li>
<li>数据集中是否存在异常值，以及异常值的具体数值</li>
<li>数据是否是对称的</li>
<li>数据的分布是否密集、集中</li>
<li>数据是否有偏向性</li>
</ul>
<p>还要提到股票，如果仔细观察，里面也用到了箱形图。</p>
<p>以上列出的几种图形，是常见的，也是基本的。在这个基础上，还有很多变形，这些变形可能综合了多种含义，比如堆积柱状图，能比较不同量之间的大小，也能部分显示分布情况。此外，还有一些专用图形，例如股票中常用的 K 线图，地理信息中常用的分级统计地图等。</p>
<p>此外，根据不同的用途，还可以创造性地开发新的图像。</p>
<p>为了便于检索，把一些图形的名称列在下面，供参考：</p>
<ul>
<li>柱形图</li>
<li>堆积柱形图</li>
<li>条形图</li>
<li>气泡图</li>
<li>直方图</li>
<li>箱形图</li>
<li>热力图</li>
<li>散点图</li>
<li>雷达图</li>
<li>环形图</li>
<li>饼图</li>
<li>折线图</li>
<li>K 线图</li>
<li>仪表盘</li>
<li>词云</li>
</ul>
<p>对数据进行可视化的时候，要根据数据特征、绘图目的选择适合的图像。</p>
<h3 id="-9">总结</h3>
<p>本课将“数据可视化”分为“艺术性可视化”和“数学性可视化”两类，本达人课主要讲述的是“数学性可视化”，即基于统计学基本知识，运用编程技能实现数据可视化。这种方式特别适用于大数据的问题中。</p>
<p>本课还列出了常用的统计图，生成这些统计图的数学原理及其所表达的含义，请参阅有关统计学的知识。</p></div></article>