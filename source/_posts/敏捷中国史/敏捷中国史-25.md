---
title: 敏捷中国史-25
---
<article id="topicContainer" class="column_content"><h2 class="topic_title"></h2><div><div style="color:#52abbe;background:#f9f9f9;"><p style="padding:10px">中国政府加强对互联网管制和 Web 2.0 的兴起发生在同一时间段，给了中国的互联网企业难得的发展机遇。一批小型团队采用 Ruby on Rails 快速创业，在这个过程中天然地接纳了敏捷的工作方式。</p></div>
<hr />
<div style="font:13px/22px Source Han Serif; color:#708090;">
<p>“小熊好久没来杭州嘞，欢迎欢迎，来看看我做的新东西。”石一楹笑呵呵地把熊节迎进家门，带着他走进书房，打开桌上并排着的 3 台显示器，“你看，我从这个网站就可以随时看到摄像头上的图像，想看哪个就看哪个……看到没有？这是福州的图像，工商银行门口……” </p>
<p>这是 2005 年的夏天。去上海主办 “Martin Fowler 中国行”活动之前，熊节先抽空到杭州拜访老友石一楹。此时公安部正在大力开展“平安城市”建设，杭州的城市监控报警联网系统建设经验即将被推广到全国各地，在公安 IT 领域摸爬滚打多年的石一楹看到商机，创业开发了一套联网管理监控视频图像信息的软件。</p>
<p>“网站是什么技术做的？”熊节随口问道。</p>
<p>“Ruby on Rails。这个东西好哎，开发速度真快哎，Java 么是不好比的喏……”一讲到技术，石一楹的话匣子就关不住了，对着代码兴致勃勃地聊起了 Ruby on Rails 的巧妙设计。</p>
<p>“我前两个月才刚跟孟岩一起学了 Ruby on Rails 呢，”熊节一边看着代码，一边说道，“我俩一起学脚本语言，先是 Groovy，然后是 Ruby on Rails。Rails 这个‘约定俗成优于配置’真是厉害，几乎没有废话代码。”</p>
<img src="https://images.gitbook.cn/1f39ec50-2ffa-11e9-87c9-cf350c28c77e" width=400px;">
<p>“是的咯，我自己估算了一下，同样复杂的 Web 应用，用 Rails 做的代码量，比一般的 J2EE 少很多，大概只有几分之一。”石一楹语速很快，“代码少就容易维护呀，再加上自动化测试啦、自动化发布啦这些基础工具做得又好，开发效率真的比用 Java 高十倍不夸张呀。”</p>
<p>“高十倍这么厉害，那不是找到银弹啦？”</p>
<p>“哈哈哈……银弹不敢说咯，用着爽是真的呀。现在想要做个网站，真的不想动 J2EE 嘞，一想要配置 Spring、配置 Hibernate，提不起精神来开这个头呀。Rails 快呀，一两天就做个网站出来，不费劲呀。”</p>
</div>
<hr />
<h3 id="fontcolor52abbeweb20rubyonrailsfont"><font color=52abbe>Web 2.0 创业神器：Ruby on Rails</font></h3>
<p>2004 年以前，互联网的主要存在形式是<strong>网站</strong>。不论大型的内容网站，还是小型的个人网站和博客，大多以单向的信息传播为主，用户可以进行的交互非常有限。</p>
<p>2004 年底提出的 <strong>Web 2.0</strong> 概念改变了这种局面。提出这个概念的 Tim O'Reilly 认为，下一代的 Web 不再是单向的信息发布平台，而是“基于个性化微内容，提供注重用户体验、可以参与的社会化服务平台”<sup>1</sup>，更是以服务形式提供给大量用户、充分发掘用户长尾需求的软件发行机制——很多 Web 2.0 的系统已经被称为“Web 应用”而非“网站”。</p>
<p>这些特征也就意味着，下一代的 Web 需要包含更多的业务逻辑、应对更多的变动和不确定性。因此 O'Reilly 也指出，Web 2.0 需要<strong>轻量级的编程模型</strong>，以开源、服务化、松散耦合的方式来开发软件<sup>2</sup>。Ruby on Rails 正是在这个背景下诞生的开发框架。</p>
<p>出乎很多人的意料，Ruby 并不是一种很新的编程语言。日本人松本行弘 1995 年就发明了这种编程语言，只比 Java 略晚几个月。但是在随后几乎十年中，Ruby 的热度与 Java 可谓天差地别。有人打趣地考证，热门的编程语言发明者都有大胡子，因此没有胡子的松本发明的 Ruby 才一直不温不火<sup>3</sup>。</p>
<p>2005 年，可能和松本蓄上了胡子有关，时年 26 岁的丹麦创业者 David Heinemeier Hansson（常被人简称 DHH）从他的创业项目 Basecamp（一个在线项目管理工具）中提取出来的开发框架 <strong>Ruby on Rails</strong> 在很短时间内风靡了整个 Web 2.0 社区，捎带着 Ruby（而非 Java）成了那一时期很多创业者的首选编程语言。</p>
<p><strong>Rails 与敏捷</strong>之间有着先天的联系，第一本全面介绍 Rails 的图书《应用 Rails 进行敏捷 Web 开发》（被读者简称 AWDWR ）不仅把“敏捷”二字挂在标题上，跟 DHH 合作的另一位作者 Dave Thomas 本身就是敏捷宣言的签署人之一。</p>
<p>两位作者开篇即强调：“<strong>敏捷是 Rails 的基础所在</strong>……这里没有繁重的工具，没有复杂的配置，没有冗长的过程……开发者所做的工作能够立即让客户看到……用户和开发者共同发掘需求、寻找实现需求的办法…… Rails 也鼓励用户与开发团队合作，一旦看到 Rails 下面能够以如此之快的速度响应变化……客户与开发团队之间的对抗将被建设性的讨论取代”。之所以能达到这种效果，其原因是“Rails 强烈要求——甚至可以说是强迫——遵循 DRY 原则……对单元测试和功能测试的强烈重视，以及对测试套件和 mock 对象的支持，又给了开发者一张可靠的安全网”<sup>4</sup>。</p>
<p><img src="https://images.gitbook.cn/e26db0c0-39c9-11e9-8526-3505a4e76688" width=400px;></p>
<p>Rails 社区经常提及的一个观念是<strong>约定俗成优于配置</strong>（Convention over Configuration）——这也是一个敏捷宣言风格的表述。Rails 给人留下的最直观的印象是简单、开发效率高，据称开发同等复杂度的 Web 应用，Rails 的速度是 J2EE 的 5~10 倍。</p>
<p>这种效率，很大程度上源于以约定俗成的形式规定了 Web 应用开发的最佳实践，从而消除了 J2EE 开发中常见的大量复杂的 XML 配置，使开发者专注于业务问题。并且 Rails 提供的不仅是开发 Web 应用功能的开源组件，还包含一套完整的开发工具与实践。这种“手把手规定怎么做软件”的风格，用时任《程序员》杂志技术主编孟岩的话来说，“令整个 Web 开发领域受到震撼”<sup>5</sup>。</p>
<p>具体而言，Rails 以“约定俗成”的形式强烈要求、甚至强制灌输给开发者的最佳实践有几大部分。首先是架构实践，Rails 以应用脚手架的形式，规定了 MVC（模型—视图—控制器）架构和数据库存取的绝大部分技术要素，后来的版本以同样的方式规定了 RESTful 服务的风格乃至 URL 格式。然后是测试实践，Rails 规定了单元测试、功能测试、性能测试三大类测试的写法，甚至直接在代码脚手架中给出了测试样例。Rails 提供的自动化构建实践也相当完善，开发者可以完全不用修改构建脚本，用 rake 执行代码统计、测试、本地运行等常用任务。</p>
<p>更进一步，Rails 还提供了部署和生产环境运维的最佳实践。DHH 建议开发者“尽早开始部署……从实际的部署中找出问题，并且获得解决这些问题的经验……尽早了解用户对应用程序的想法，会对你的开发工作获得巨大的帮助”<sup>6</sup>。在当时的行业环境下，这种打通开发与运维的做法是一个极具开创性的主张，<strong>完全契合了当时面临极大不确定性的创业者们的诉求</strong>。</p>
<h3 id="fontcolor52abberailsfont"><font color=52abbe>Rails 在国内的应用情况</font></h3>
<p>2006 年 3 月 21 日，在一次头脑风暴聚会活动中，时年 30 岁、尚在纽约大学读研究生的程序员 Jack Dorsey 提出了一个点子：提供一个在线服务，让一群人可以通过短信互相交流。当天晚上 9 点 50 分，Dorsey 和他的队友们用 Ruby on Rails 实现了这个点子的第一个原型，在刚刚开发的系统上发布了第一条“社交短信”。</p>
<p>这个像个小玩具一样的系统，在十年后会拥有 3 亿月活用户，并成为当年美国总统竞选期间最重要的信息源，单日发布 4000 万条与竞选有关的信息<sup>7</sup>。这个系统就是 Twitter，Web 2.0 时代最重要的社交网络之一。</p>
<p><strong>Twitter 的故事包含了 Web 2.0 创业神话的一切经典要素</strong>：孕育于一次头脑风暴聚会，起初只有一个异想天开的脑洞，极大的不确定性，没有缜密的验证，立即开始实现，一天之内拿出可以运行的原型，病毒式传播……Rails 给创业者们带来的不仅是一种便利的开发工具，更是一整套关于“如何在 Web 2.0 时代创业”的方法论。</p>
<p>这套方法论后来总结完善，被称为<strong>精益创业</strong>（Lean Startup），其核心就是通过“构建—度量—学习”（build-measure-learn）的循环，快速地把点子构建成可工作的软件、对软件的真实使用情况进行度量得到数据、并从数据中学习产生新的点子<sup>8</sup>。Rails 提供了快速构建软件的可能性，把这个循环的周期压缩到了极致：在一天时间里就可以开发出可用的软件，甚至可以进行几次迭代。</p>
<p><img src="https://images.gitbook.cn/e8bb0090-39c9-11e9-8526-3505a4e76688" width=400px;></p>
<p>这种快速开发、快速获得反馈的能力，使年轻的创业者们开始热衷于一种充满“极客”氛围的聚会活动：<strong>黑客松</strong>（Hackathon）。这个将“黑客”与“马拉松”组合而来的词，很好地表达了其内涵：黑客们聚在一起，像跑马拉松一样进行一段长时间、高强度的软件开发。</p>
<p>一次典型的黑客松可能从星期五下班后开始，到星期天晚上结束，历时 54 小时。参与其中的不仅有程序员，还有企业家、设计师等各种角色。他们组成队伍，在两天多的时间里几乎不眠不休，靠高热量食物和大量咖啡因保持精力，力争做出一个有趣的新网站、新 App<sup>9</sup>。当时这类黑客松活动大多采用 Rails 作为开发工具，也能反映出 Rails 不仅开发效率高、而且开发体验良好，否则牺牲周末两天时间连续编程恐怕无法吸引程序员参与。</p>
<p>Rails 的高效在中国技术社区也引起了关注。2008 年，ThoughtWorks 在北京举办了一次黑客松活动，在周末两天时间里，帮助公益组织“乡村教育促进会”搭建了用于农村教师和志愿者交流教学经验的网站<sup>10</sup>。</p>
<p><img src="https://images.gitbook.cn/25965750-2ffa-11e9-81c3-efa0c757d4d2" width=350px;"></p>
<p>同一时期，国内的 Rails 社区蓬勃发展，涌现了财帮子、友播网、乐道等 Web 2.0 创业项目， 以及好几个专注 Ruby 和 Rails 的技术社区网站。JavaEye 也在这段时间改版，由原来的 PHPBB 系统改为用 Rails 开发的新系统。据范凯称，<strong>选择使用 Rails 重写 JavaEye 网站</strong>，是受到了石一楹的影响<sup>11</sup>。</p>
<p>另一些团队在使用 Rails 接离岸外包的工作，帮助北美和澳洲的互联网企业实现他们的点子。</p>
<p>尼毕鲁科技的创始人杨祥吉当时就在接单北美金融服务公司的外包业务，他认为 Rails 的优势“不仅是快速高效，更重要的是优雅简洁”，并且强调敏捷（尤其是测试先行、结对开发、短周期迭代、每日晨会等实践）在此类项目中的重要性<sup>12</sup>。ThoughtWorks 中国区也先后承接了来自喜达屋（StarWood）、LonelyPlanet、REA 等外国企业的 Rails 外包项目，并开发了在企业 IT 环境下支持 Ruby on Rails 的 RubyWorks 系列产品<sup>13</sup>。到 2012 年前后，ThoughtWorks 在西安使用 Rails 的团队有数十人规模，可能是当时中国最大的 Rails 团队。</p>
<p>Rails 从<strong>核心哲学</strong>上就深受 Dave Thomas 等全球敏捷领袖的影响，引入中国时又与石一楹、范凯、ThoughtWorks 等敏捷先锋有着千丝万缕的联系，深植其中的测试驱动开发、快速迭代、持续集成等敏捷实践又通过众多创业团队和尼毕鲁这样的外包交付团队影响到更多的从业者。Web 2.0 浪潮把动荡、不确定的互联网时代真真切切地带到了中国 IT 从业者面前，让<strong>敏捷的原则和实践找到了用武之地</strong>。 </p>
<h3 id="fontcolor52abbefont"><font color=52abbe>参考文献</font></h3>
<p>1　曾登高.Web2.0下一代网络模式[J].程序员,2005(12):82-83.<br />
2　<a href="https://www.oreilly.com/pub/a/web2/archive/what-is-web-20.html">Tim O'Reilly.What Is Web 2.0</a>[EB/OL].<br />
3　方茜.最搞笑的惊人发现C#前途黯淡,都是大胡子惹的祸?![J].程序员,2005(01):56-57.<br />
4　（美）托马斯（Thomas,D.）,（美）汉松（Hansson.Web开发敏捷之道 应用Rails进行敏捷Web开发,第2版[M].电子工业出版社,2007.<br />
5　黄甫.调查报告:J2EE人的Rails观[J].程序员,2005(09):82-84.<br />
6　（美）托马斯（Thomas,D.）,（美）汉松（Hansson.Web开发敏捷之道 应用Rails进行敏捷Web开发,第2版[M].电子工业出版社,2007.<br />
7　<a href="https://en.wikipedia.org/wiki/Twitter">维基百科.Twitter</a>[EB/OL].<br />
8　埃里克·莱斯（EricRies）著.精益创业[M].中信出版社,2012:26,246.<br />
9　<a href="https://www.inside.com.tw/2012/08/31/startup-weekend-hardware">Lawrence Lin.黑客松經驗談：一個週末、54 小時的時間，你能做出有趣、有用的服務嗎？</a>[EB/OL].<br />
10　<a href="http://gigix.thoughtworkers.org/2013/8/13/code-jam-in-2008/">熊节.回忆：2008年的Code Jam</a>[EB/OL].<br />
11　<a href="https://www.ctolib.com/topics-59689.html">范凯.我的PHP，Python和Ruby之路</a>[EB/OL].<br />
12　杨祥吉.Ruby、Rails、Agile的启示[J].程序员,2007(12):64-69.<br />
13　熊节.不敢止步[M].人民邮电出版社,2014:168.  </p>
<h3 id="fontcolor52abbefont-1"><font color=52abbe>畅聊技术历史与人生</font></h3>
<p>我们希望订阅课程的朋友们可以一起把酒言敏捷，分享技术世界的一切趣事，畅聊各自的技术人生。《敏捷中国史》是普通 IT 人形塑历史的故事，也是永远不会完结的技术旅程。你可以将自己的想法发表在评论区，也可以加入《敏捷中国史》交流群，小到我们一起完善这部作品，大到共同创造未来更好的 IT 世界。（入群请加 GitChat 小助手伽利略的微信，ID 为 GitChatty6，回复关键字「246」。）</p>
<p><img src="https://images.gitbook.cn/8fbe5ea0-3529-11e9-af4a-bd2de5905629" ></p>
<div style="font:12px/20px Source Han Serif; color:#bbb;">分享上面的《敏捷中国史》阅读卡片，跟朋友一起了解中国软件开发方法的进化和一代程序员自我突破的故事。</div></div></article>