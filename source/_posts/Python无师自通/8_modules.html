---
title: 模块
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>模块</title>
</head>
<body>
<article id="articleDiv"><div class="mazi-article-content dont-break-out"><p></p><div class="toc">
<ul>
<li><ul>
<li><ul>
<li><a href="#81">8.1　导入内置模块</a></li>
<li><a href="#82">8.2　导入其他模块</a></li>
<li><a href="#83">8.3　术语表</a></li>
<li><a href="#84">8.4　挑战练习</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p></p>
<blockquote>
  <p><span style="font-family: Times New Roman,楷体_GB2312">“坚韧与志气在任何时代都会带来奇迹。”</span></p>
  <p><span style="font-family: Times New Roman,楷体_GB2312">——乔治 · 华盛顿（George Washington）</span></p>
</blockquote>
<p>假设你写了一个有 10000 行代码的程序。如果把全部代码写在一个文件里，查询起来将会非常困难。每次出现错误或异常时，不得不快速浏览 10000 行代码来查找导致问题的那行。为解决这个问题，程序员将大型程序分割成多个包含 Python 代码的文件，也被称为<strong>模块</strong>（module）。Python 支持在一个模块中使用另一个模块内的代码。Python 还有<strong>内置模块</strong>（builtin module），它是 Python 语言自带的，包含了许多重要的功能。本章将学习模块及其使用方式。</p>
<h3 id="81">8.1　导入内置模块</h3>
<p>使用模块之前，必须先<strong>导入</strong>（import）：意味着要写代码，以便让 Python 知道从哪获取模块。可使用语法 <code>import [模块名]</code>导入模块，将<code>[模块名]</code>替换为希望导入模块的名字。导入模块之后，即可使用其中的变量和函数。</p>
<p>Python 有许多不同的模块，包括拥有数学相关功能的 <code>math</code> 模块。可在网页 https://docs.python.org/3/py-modindex.html 查看所有 Python 的内置模块。导入 <code>math</code> 模块的示例如下：</p>
<pre class="代码无行号"><code class="hljs cpp"><span class="hljs-number">1</span>  <span class="hljs-meta"># http:<span class="hljs-comment">//tinyurl.com/h3ds93u</span></span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>  <strong><span class="hljs-keyword">import</span></strong> math</code></pre>
<p>导入模块之后，可通过语法<code>[模块名].[代码]</code>使用其中的代码，将<code>[模块名]</code>替换为已导入模块的名称，<code>[代码]</code>替换为希望使用的函数或变量的名称。下面是导入 <code>math</code> 模块并使用其中 <code>pow</code> 函数的示例，该函数接受两个参数 <code>x</code> 和 <code>y</code>，并求 <code>x</code> 的 <code>y</code> 次方：</p>
<pre class="代码无行号"><code class="hljs cpp"><span class="hljs-number">1</span>  <span class="hljs-meta"># http:<span class="hljs-comment">//tinyurl.com/hyjo59s</span></span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>  <strong><span class="hljs-keyword">import</span></strong> math
<span class="hljs-number">5</span>
<span class="hljs-number">6</span>
<span class="hljs-number">7</span>  math.<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)

&gt;&gt; <span class="hljs-number">8.0</span></code></pre>
<p>首先，在文件顶部导入 <code>math</code> 模块。这里应该在文件顶部导入了所有模块，以便明确程序都使用了哪些模块。接下来，通过 <code>math.pow(2, 3)</code> 调用 <code>pow</code> 函数，返回结果为 <code>8.0</code>。</p>
<p><code>random</code> 是另一个内置模块。可使用其中一个叫 <code>randint</code> 的函数生成一个随机整数：传入两个整数，函数返回两者之间的一个随机整数。</p>
<pre class="代码无行号"><code class="hljs ruby"><span class="hljs-number">01</span>  <span class="hljs-comment"># http://tinyurl.com/hr3fppn</span>
<span class="hljs-number">02</span>
<span class="hljs-number">03</span>
<span class="hljs-number">04</span>  <span class="hljs-comment"># 你运行的时候输出结果可能不是 52</span>
<span class="hljs-number">05</span>  <span class="hljs-comment"># 因为是随机生成的！</span>
<span class="hljs-number">06</span>
<span class="hljs-number">07</span>
08  <strong>import</strong> random
09
<span class="hljs-number">10</span>
<span class="hljs-number">11</span>  random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>)

<span class="hljs-meta">&gt;&gt;</span> <span class="hljs-number">52</span></code></pre>
<p>可使用内置模块 <code>statistics</code> 计算由数字组成的可迭代对象的均值、中间值和众数（mode）。示例如下：</p>
<pre class="代码无行号"><code class="hljs ruby"><span class="hljs-number">01</span>  <span class="hljs-comment"># http://tinyurl.com/jrnznoy</span>
<span class="hljs-number">02</span>
<span class="hljs-number">03</span>
<span class="hljs-number">04</span>  <strong>import</strong> statistics
<span class="hljs-number">05</span>
<span class="hljs-number">06</span>  <span class="hljs-comment"># 均值</span>
<span class="hljs-number">07</span>  nums = [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">33</span>, <span class="hljs-number">12</span>, <span class="hljs-number">46</span>, <span class="hljs-number">33</span>, <span class="hljs-number">2</span>]
08  statistics.mean(nums)
09
<span class="hljs-number">10</span>
<span class="hljs-number">11</span>  <span class="hljs-comment"># 中值</span>
<span class="hljs-number">12</span>  statistics.median(nums)
<span class="hljs-number">13</span>
<span class="hljs-number">14</span>
<span class="hljs-number">15</span>  <span class="hljs-comment"># 众数</span>
<span class="hljs-number">16</span>  statistics.mode(nums)

<span class="hljs-meta">&gt;&gt;</span> <span class="hljs-number">18.857142857142858</span>
<span class="hljs-meta">&gt;&gt;</span> <span class="hljs-number">12</span>
<span class="hljs-meta">&gt;&gt;</span> <span class="hljs-number">33</span></code></pre>
<p>可使用内置模块 <code>keyword</code> 检查字符串是不是 Python 关键字。示例如下：</p>
<pre class="代码无行号"><code class="hljs ruby"><span class="hljs-number">1</span>  <span class="hljs-comment"># http://tinyurl.com/zjphfho</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>  <strong>import</strong> keyword
<span class="hljs-number">5</span>
<span class="hljs-number">6</span>
<span class="hljs-number">7</span>  keyword.iskeyword(<span class="hljs-string">"for"</span>)
<span class="hljs-number">8</span>  keyword.iskeyword(<span class="hljs-string">"football"</span>)

<span class="hljs-meta">&gt;&gt;</span> True
<span class="hljs-meta">&gt;&gt;</span> False</code></pre>
<h3 id="82">8.2　导入其他模块</h3>
<p>本节中，我们将创建一个模块，然后在另一个模块中导入该模块并使用其中的代码。首先，在计算机上创建一个名为 tstp 的新文件夹。在文件夹中，新建一个名为 <code>hello.py</code>的文件。将如下代码添加到 <code>hello.py</code>并保存文件：</p>
<pre class="代码无行号"><code class="hljs python"><span class="hljs-number">1</span>  <span class="hljs-comment"># http://tinyurl.com/z5v9hk3</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>  <strong><span class="hljs-function"><span class="hljs-keyword">def</span></span></strong><span class="hljs-function"> <span class="hljs-title">print_hello</span><span class="hljs-params">()</span>:</span>
<span class="hljs-number">5</span>      print(<span class="hljs-string">"Hello"</span>)</code></pre>
<p>在 tstp 文件夹中，再新建一个名为 <code>project.py</code> 的文件。将如下代码添加到 <code>project.py</code> 中并保存文件：</p>
<pre class="代码无行号"><code class="hljs cpp"><span class="hljs-number">1</span>  <span class="hljs-meta"># http:<span class="hljs-comment">//tinyurl.com/j4xv728</span></span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>  <strong><span class="hljs-keyword">import</span></strong> hello
<span class="hljs-number">5</span>
<span class="hljs-number">6</span>
<span class="hljs-number">7</span>  hello.print_hello()

&gt;&gt; Hello</code></pre>
<p>本例使用 <code>import</code> 关键字导入第一个示例中的代码。</p>
<p>导入模块时，其中的代码都会被执行。创建一个名为 <code>module1.py</code> 的模块，代码如下：</p>
<pre class="代码无行号"><code class="hljs ruby"><span class="hljs-number">1</span>  <span class="hljs-comment"># http://tinyurl.com/zgyddhp</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>  <span class="hljs-comment"># 模块 1 中的代码</span>
<span class="hljs-number">5</span>  print(<span class="hljs-string">"Hello!"</span>)

<span class="hljs-meta">&gt;&gt;</span> Hello!</code></pre>
<p>在名为 <code>module2.py</code> 的另一个模块中导入 <code>module1.py</code> 时，其中的代码将会被执行：</p>
<pre class="代码无行号"><code class="hljs ruby"><span class="hljs-number">1</span>  <span class="hljs-comment"># http://tinyurl.com/jamt9dy</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>  <span class="hljs-comment"># 模块 2 中的代码</span>
<span class="hljs-number">5</span>  <strong>import</strong> hello

<span class="hljs-meta">&gt;&gt;</span> Hello!</code></pre>
<p>这个行为有时候会导致不便。比如你的模块中可能有测试代码，不希望在导入时执行。那么将模块中所有的代码放置在 <code>if __name__ == "__main__"</code> 语句中，即可解决该问题。例如，可以将上例中的 <code>module1.py</code> 的代码改成如下示例：</p>
<pre class="代码无行号"><code class="hljs ruby"><span class="hljs-number">1</span>  <span class="hljs-comment"># http://tinyurl.com/j2xdzc7</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>  <span class="hljs-comment"># 模块 1 中的代码</span>
<span class="hljs-number">5</span>  <strong><span class="hljs-keyword">if</span></strong> __name_<span class="hljs-number">_</span> == <span class="hljs-string">"__main__"</span>:
<span class="hljs-number">6</span>      print(<span class="hljs-string">"Hello!"</span>)

<span class="hljs-meta">&gt;&gt;</span> Hello!</code></pre>
<p>运行该程序时，输出总是不变的。但是在 <code>module2.py</code> 中导入该模块时，<code>module1.py</code> 中的代码不会运行，不会打印 <code>Hello!</code>。示例如下：</p>
<pre class="代码无行号"><code class="hljs coffeescript"><span class="hljs-number">1</span>  <span class="hljs-comment"># http://tinyurl.com/jjccxds</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>  <span class="hljs-comment"># 模块 2 中的代码</span>
<span class="hljs-number">5</span>  <strong><span class="hljs-keyword">import</span></strong> hello</code></pre>
<h3 id="83">8.3　术语表</h3>
<p><strong>模块</strong>：含有代码的 Python 文件的别称。</p>
<p><strong>内置模块</strong>：Python 语言中自带的模块，包含诸多重要的功能。</p>
<p><strong>导入</strong>：编写代码，告诉 Python 从哪导入计划使用的模块。</p>
<h3 id="84">8.4　挑战练习</h3>
<p>1．调用 <code>statistics</code> 模块中不同于示例中提到的函数。</p>
<p>2．创建一个名为 <code>cubed</code> 的模块，在其中写一个函数：接受一个数字作为参数，返回该数字的立方。并在另一个模块中导入并调用该函数。</p>
<p>答案可从异步社区（www.epubit.com）本书详情页的配套资源中下载。</p></div></article>
</body>
</html>