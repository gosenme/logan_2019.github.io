---
title: 编程算法同步学-15
---
<article id="topicContainer" class="column_content"><h2 class="topic_title"></h2><div><h3 id="">二叉树树的遍历</h3>
<h4 id="-1">树的遍历和图的遍历</h4>
<p>在计算机科学里，树的遍历指按照某种规则，不重复地访问树的所有节点的过程。具体的访问操作可能是检查节点的值、更新节点的值等。不同的遍历方式，其访问节点的顺序是不一样的。</p>
<p>因为树是图的一个子集，因此，树的遍历，也属于图遍历的子集。图遍历的原则主要有深度优先和广度优先两种。</p>
<p>这两大遍历原则对于树也同样适用。又因为有根树是树的一种，二叉树是有根树的一种，二叉树的遍历也分为深度优先和广度优先两种。</p>
<p>不过在实际应用中，对二叉树而言，深度优先用得更多。</p>
<p>下面我们具体讲一下二叉树的几种遍历方式。</p>
<h4 id="-2">二叉树的深度优先遍历算法</h4>
<p>深度优先遍历二叉树的算法又有分为三种：先序遍历（Pre-Order Traversal），中序遍历（In-Order Traversal）和后序遍历（Post-Order Traversal）。</p>
<p>这里的先、中和后所指向的主体是什么呢？是<strong>根节点</strong>。</p>
<p>先、中、后序遍历实际上是<strong>先根序，中根序</strong>和<strong>后根序</strong>遍历。</p>
<p>这三种算法的<strong>区别</strong>就在于：在访问一棵树的时候，是先访问根节点，在“半截/中间”访问根节点，还是在最后访问根节点。</p>
<p>但无论那种遍历，都要：</p>
<ul>
<li>把一棵树拆成左子树、右子树和根三个部分；</li>
<li>再将左右子树分别作为两棵树划分左右子树和根，如此层层深入下去；</li>
<li>直到一棵子树只有一个节点为止。</li>
</ul>
<p>比如下面这棵二叉树：</p>
<p><img src="https://images.gitbook.cn/cdce5cf0-7f9c-11e9-a72f-db858373b063" alt="enter image description here" /></p>
<p>我们来对它进行层层划分，就像下面这样，红色圈内是左子树，绿色圈内是右子树，没有被圈上的是根节点。</p>
<p><img src="https://images.gitbook.cn/dd503e00-7f9c-11e9-b041-13225ca87d14" alt="enter image description here" /></p>
<h4 id="-3">中序遍历</h4>
<p>中根序的遍历过程是这样的：</p>
<ul>
<li>先访问根节点的左子树，</li>
<li>然后访问根节点，</li>
<li>最后访问根节点的右子树。</li>
</ul>
<p>在访问子树的时候，也遵循同样的——“左子树-&gt;根-&gt;右子树”——的原则。</p>
<p>我们对二叉树进行中序遍历， 遍历结果用序列表达，应该是：{{左子树遍历结果}，1，{右子树遍历结果}}</p>
<p>左右子树的遍历结果再细化下去，直到一棵树的左右子树都只有0-1个节点为止——就像上图中（7），（8），（9），（10）那样，这4棵子树算是“到了头“，无法再被细分了。</p>
<p>我们按中序来看上图中（7）-（10）这4棵子树的遍历结果：</p>
<ul>
<li>（7）子树的输出为：{12，7，13}</li>
<li>（8）子树的输出为：{14，8}</li>
<li>（9）子树的输出为：{15，9，16}</li>
<li>（10）子树的输出为：{11，17}</li>
</ul>
<p>然后将这些输出带入到上一层：</p>
<ul>
<li>（8）带入（4），得出（4）子树的输出为：{{14，8}，4}</li>
<li>（9）带入（5），得出（5）子树输出为：{{15，9，16}，5，{10}}</li>
<li>（10）带入（6），得出（6）子树输出为：{6，{11， 17}}</li>
</ul>
<p>将目前的输出再带入上一层：</p>
<ul>
<li>（4）和（5）带入（2），得出（2）子树的输出为：{{14，8，4}， 2， {15， 9， 16， 5， 10}}</li>
<li>（6）和（7）带入（3），得出（3）子树的输出为：{{6，11， 17}，3，{12，7，13}}</li>
</ul>
<p>将（2）和（3）子树输出带入顶层：</p>
<ul>
<li>（2）和（3）带入（1），得出整棵树最终的输出为：{{14，8，4， 2， 15， 9， 16， 5， 10}，1，{6，11， 17，3，12，7，13}}</li>
</ul>
<h4 id="-4">先序遍历</h4>
<p>先序遍历的顺序是：根-&gt;左子树-&gt;右子树，具体逐层深入的方法和中序遍历是一样的。</p>
<p>对应上面的例子，先序遍历就变成了下面这样：</p>
<p>底层子树：</p>
<ul>
<li>（7）：{7，12，13}</li>
<li>（8）：{8，14}</li>
<li>（9）：{9，15，16}</li>
<li>（10）：{11，17}</li>
</ul>
<p>代入上一层：</p>
<ul>
<li>（4）：{4，{8，14}} </li>
<li>（5）：{5，{9，15，16}，{10}}</li>
<li>（6）：{6，{11，17}}</li>
</ul>
<p>代入再上层：</p>
<ul>
<li>（2）：{2，{4，8，14}，{5，9，15，16，10}}</li>
<li>（3）：{3， {6，11，17}， {7，12， 13}}</li>
</ul>
<p>代入顶层：</p>
<ul>
<li>（1）：{1， {2，4，8，14，5，9，15，16，10}，{ 3， 6，11，17， 7，12， 13}}</li>
</ul>
<h4 id="-5">后序遍历</h4>
<p>后序遍历的顺序是左子树-&gt;右子树-&gt;根，具体逐层深入的方法和中序、先序遍历也是一样的。</p>
<p>对应上面的例子，后序遍历就变成了下面这样：</p>
<p>底层子树：</p>
<ul>
<li>（7）：{12，13，7}</li>
<li>（8）：{14，8}</li>
<li>（9）：{15，16，9}</li>
<li>（10）：{17，11}</li>
</ul>
<p>（4）：{{14，8}，4}
（5）：{{15，16，9}，{10}，5}
（6）：{{11，17}，6}</p>
<p>（2）：{{14，8，4}，{15，16，9，10，5}，2}
（3）：{{11，17，6}，{12，13，7}，3}</p>
<p>（1）：{{14，8，4，15，16，9，10，5，2}，{11，17，6，12，13，7，3}，1}</p>
<p>无论是中序、先序还是后序遍历，都是从根节点开始“往下“走，往深层次走，所以叫做<strong>深度优先遍历</strong>。</p>
<h4 id="-6">二叉树的广度优先遍历算法</h4>
<p>和深度优先遍历不同，广度优先遍历会先访问离根节点最近的节点。</p>
<p>二叉树的广度优先遍历又称<strong>按层次遍历</strong>。就是从根节点开始，每一层从左到右，把当前层都遍历完之后再进入下一层，每层都是从最左侧节点开始。</p>
<p>例如上面例子里的那棵树，如果是广度优先遍历则是下面这个顺序：</p>
<p><img src="https://images.gitbook.cn/f0e9ca30-7f9c-11e9-a72f-db858373b063" alt="enter image description here" /></p>
<p>最后的输出为：{1，2，3，4，5，6，7，8，9，10，11，12，13，14，15，16，17}</p>
<p>关于树和二叉树的操作还有多种，比如：构建、查找、旋转等等。每个都有相应的一种或多种算法，也都很重要，不过遍历是所有算法中的最基础。</p>
<h3 id="-7">树和图的现实意义</h3>
<p>为什么树和图这样的逻辑结构这么重要呢？是因为在现实当中，有很多事物的抽象结果，就是树或者图。</p>
<h4 id="-8">图的抽象</h4>
<p>比如前面提到的柯尼斯堡七桥问题问题，原本是两座小岛，两岸和七座桥，再加上两岸的建筑之类，画出来一幅很复杂的地图。</p>
<p><img src="https://images.gitbook.cn/0484dd00-7f9d-11e9-a72f-db858373b063" alt="enter image description here" /> </p>
<p>现在，我们要研究如何不重复地经过所有这七座桥，那么我们就可以将除了桥和岛、岸之外的其他地貌、建筑都忽略掉，变成下面这样： </p>
<p><img src="https://images.gitbook.cn/0aaa0b60-7f9d-11e9-b041-13225ca87d14" alt="enter image description here" /></p>
<p>又因为我们要研究的是“经过”桥，因此，我们这要把七座桥的相对位置和连通方式表达出来即可。</p>
<p>于是，进一步把桥抽象成边，将它们的起止点抽象成顶点，就有了下面这个图（Graph）结构：</p>
<p><img src="https://images.gitbook.cn/130e0630-7f9d-11e9-9482-6704bcd43149" alt="enter image description here" /></p>
<h4 id="-9">树的抽象</h4>
<p>树结构的抽象更为常见。我们来看几个例子：</p>
<p><strong>Case1</strong>：下面是利用16S 核糖体RNA绘制的系统发生树——系统发生树（phylogenetic tree）又称演化树或进化树（evolutionary tree），是一种用来表明具有共同祖先的各物种间演化关系的有根树结构。</p>
<p>下图根在最下面，将它倒过来，就是一棵我们熟悉的树了。其中，三个最大分支分別为細菌、古菌和真核生物。</p>
<p><img src="https://images.gitbook.cn/1f9b1140-7f9d-11e9-b041-13225ca87d14" alt="enter image description here" /></p>
<p><strong>Case2</strong>：计算机的目录结构也是有根树:</p>
<p><img src="https://images.gitbook.cn/250d9170-7f9d-11e9-b041-13225ca87d14" alt="enter image description here" /> </p>
<p>在Windows下命令行用tree 命令就可以看到目录树。</p>
<p><strong>Case3</strong>：企业的组织架构图也是典型的有根树：</p>
<p><img src="https://images.gitbook.cn/3aed3d10-7f9d-11e9-b041-13225ca87d14" alt="enter image description here" /> </p>
<p><strong>Case4</strong>：与组织架构类似，家谱也是一种有根树结构，比如下面这张世系表：</p>
<p><img src="https://images.gitbook.cn/418f63a0-7f9d-11e9-8c78-99eb5a2d4558" alt="enter image description here" /></p>
<blockquote>
  <p><strong>小贴士</strong>：有些家谱中把夫妇分为两个节点，然后再标明关联关系（比如下面这张），这就不是严格的树形结构了，至于为什么，请回顾树的定义。 
  <img src="https://images.gitbook.cn/46b60dc0-7f9d-11e9-b041-13225ca87d14" alt="enter image description here" /></p>
</blockquote>
<h3 id="vs">图 vs 树</h3>
<h4 id="-10">树为图的真子集</h4>
<p>前面提到过，树是图的一类特例。那么自然所有的树都是图，但并非所有的图都是树。</p>
<ol>
<li>树中不同节点间的连接有方向。</li>
</ol>
<blockquote>
  <p><strong>NOTE</strong>：在有根树中所有的连接都是从根开始，向叶子蔓延的，所以无须特意标出方向，我们在本章和上一章的有根树的图形中并没有标出方向，是因为方向默认，而不是不存在。</p>
</blockquote>
<ol>
<li>还有，树中没有环。</li>
</ol>
<h3 id="-11">树相对于图更加严谨</h3>
<p>简单来讲，<strong>相对于图，树的限制更多</strong>，因此树形结构相对于典型的图（非树的那些图），更加严整、严谨。</p>
<p>举个非常直观例子：</p>
<blockquote>
  <p>如果一本小说中的人物关系基本上是树或者森林（多棵树）形状的结构，那么相对而言，小说的结构就比较规整，小说作者对于全局的掌控力比较强，整体的人物设置、情节安排乃至背景一般都是经过精心设计的。</p>
  <p>但如果小说的人物关系是一张图（有环、无序），那么整体结构一般相对松散，作者在创作时的随意性较大。</p>
</blockquote>
<p>作为我国古典小说的巅峰的四大名著，主体人物设置都是树或森林结构：</p>
<ul>
<li>《红楼梦》中的四大家族，</li>
<li>《三国演义》中的政治军事集团，</li>
<li>《水浒传》里108将聚义后的梁山， </li>
<li>《西游记》里的西天、天庭体系</li>
</ul>
<p>都可以通过家谱树或者组织架构图来描绘。</p>
<p><img src="https://images.gitbook.cn/202c6e10-847a-11e9-b2bb-451f18cbdadc" alt="enter image description here" /></p>
<p>而一些未经文学家整理的民间著作，比较典型的有各种评书、评话作品，往往缺乏自始至终的整体设计，而是“想到哪儿说到哪儿”。</p>
<p>一部书能有一个贯穿始终的人物（书胆）就很不错了，往往缺乏统一的整体设计。经常忽然出现各种与之前情节毫不相关的新人物和支线。</p>
<p>这样的作品，如果描绘人物关系图，几乎无法确定根、枝、叶，只能围绕书胆绘制成一张无向有环的图（Graph）。</p>
<p>比如有部评书作品叫做《雍正剑侠图》——以侠客童林为书胆，一会儿天南一会儿地北，各色奇形怪状的人物轮番登台，真是一幅“雍正剑侠Graph”。</p>
<p><img src="https://images.gitbook.cn/2c99ffb0-8479-11e9-bf73-a153754b1981" alt="enter image description here" /></p></div></article>